<ion-header>

    <ion-navbar color="header">
        <ion-title>Oswal Jewellers</ion-title>
    </ion-navbar>

</ion-header>


<ion-content padding>
    <h5>Sale Bill Entry</h5>
    <form [formGroup]="register">
        <ion-row>
            <ion-col col-6>
                <ion-item>
                    <ion-input type="number" placeholder="Bill Number" formControlName="Bill"></ion-input>
                </ion-item>
            </ion-col>
            <ion-col col-6>
                <ion-item (click)="opencal()">
                    <ion-label class="marginlbl">{{ date }}</ion-label>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-item>
            <ion-label floating>Name</ion-label>
            <ion-input type="text" formControlName="Name"></ion-input>
        </ion-item>
        <div padding-horizontal>
            <div class="alert" *ngIf="!register.controls['Name'].valid && register.controls['Name'].touched">Please Enter Name</div>
        </div>
        <ion-item>
            <ion-textarea placeholder="Enter Address" rows="4" formControlName="Address"></ion-textarea>
        </ion-item>
        <div padding-horizontal>
            <div class="alert" *ngIf="!register.controls['Address'].valid && register.controls['Address'].touched">Please Enter Address</div>
        </div>
        <ion-item>
            <ion-label floating>Mobile Number</ion-label>
            <ion-input type="number" formControlName="Mobile"></ion-input>
        </ion-item>
        <div padding-horizontal>
            <div class="alert" *ngIf="!register.controls['Mobile'].valid && register.controls['Mobile'].touched">Please Enter a mobile number</div>
        </div>
        <ion-list style="margin-top: 5px !important;">
            <ion-item-divider color="light" class="dividerpadding">
                Item Details
            </ion-item-divider>
            <ion-item>
                <ion-row *ngFor="let item of items">
                    <ion-col col-12>
                        <p class="subtitle">
                            <ion-icon color="primary" name="md-create" (click)="itemclick(item)"></ion-icon>
                            <span class="subvalue">
                                <ion-icon color="danger" (click)="delete(item)" name="trash"></ion-icon>
                            </span>
                        </p>
                        <p class="subtitle">Item Name: <span class="subvalue">{{item.name}}</span></p>
                        <p class="subtitle">Item Weight: <span class="subvalue">{{item.weight}} {{item.Unit}}  </span></p>
                        <p class="subtitle">Item Rate: <span class="subvalue">{{item.rate}}</span></p>
                        <p class="subtitle">Item Amount: <span class="subvalue">{{item.amount}}</span></p>
                    </ion-col>
                </ion-row>
                <hr>
                <ion-row>
                    <ion-col col-12>
                        <p> Total Amount: <span class="subvalue">{{totalItemamount}}</span></p>
                    </ion-col>
                </ion-row>
                <p class="title" (click)="itemclick()">
                    <ion-icon color="primary" name="md-add-circle"></ion-icon> Add Item</p>

            </ion-item>
            <ion-item-divider color="light" class="dividerpadding">
                Mode Details
            </ion-item-divider>
            <ion-item>
                <ion-row *ngFor="let item of modes">
                    <ion-col col-12>
                        <p class="subtitle">
                            <ion-icon color="primary" name="md-create" (click)="modeitemclick(item)"></ion-icon>
                            <span class="subvalue">
                                <ion-icon color="danger" (click)="deletemode(item)" name="trash"></ion-icon>
                            </span>
                        </p>
                        <p class="subtitle">Item type:
                                <span class="subvalue">{{item.modetype}}</span>
                         </p>
                        <p style="white-space: normal !important;" class="subtitle">Item Detail: <span class="subvalue">{{item.name}}</span></p>
                        <p class="subtitle">Item Amount: <span class="subvalue">{{item.amount}}</span></p>
                    </ion-col>
                </ion-row>
                <hr>
                <ion-row>
                    <ion-col col-12>
                        <p> Total Amount: <span class="subvalue">{{totalModemamount}}</span></p>
                    </ion-col>
                </ion-row>
                <p class="title" (click)="modeitemclick({id:0})">
                    <ion-icon color="primary" name="md-add-circle"></ion-icon> Add Mode</p>

            </ion-item>
            <ion-item>
                <ion-row>
                    <ion-col col-12>
                        <p> Total Bill Amount: <span class="subvalue">{{totalamount}}</span></p>
                    </ion-col>
                </ion-row>
            </ion-item>
            <ion-row>
                    <ion-col col-8>
                        <ion-item>
                            Labour Charges:
                        </ion-item>
                    </ion-col>
                    <ion-col col-4>
                        <ion-input class="align" type="number" formControlName="labourcharge"></ion-input>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col col-8>
                        <ion-item>
                            Discount:
                        </ion-item>
                    </ion-col>
                    <ion-col col-4>
                        <ion-input class="align" type="number" formControlName="discount"></ion-input>
                    </ion-col>
                </ion-row>
    
                <ion-item>
                    <ion-row>
                        <ion-col col-12>
                            <p> Net Amount Total:
                                <span class="subvalue">{{totalnetamount}}</span>
                            </p>
                        </ion-col>
                    </ion-row>
                </ion-item>
            </ion-list>
            <div class="button_div">
                <button ion-button small (click)="cal()" [disabled]="!register.valid">
                    Calculate Amount
                </button>
            </div>

        <!-- Float the icon right -->
        <div class="button_div">
            <button ion-button [disabled]="!register.valid" (click)="logForm()" block icon-right>
            submit
             </button>
        </div>
    </form>
</ion-content>